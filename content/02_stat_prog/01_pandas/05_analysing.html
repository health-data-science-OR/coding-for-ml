
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Analysing real data sets &#8212; Python for health data science.</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'content/02_stat_prog/01_pandas/05_analysing';</script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Case study: Combining multiple sources" href="06_cs_combining.html" />
    <link rel="prev" title="Managing time series" href="04_datetimes.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../front_page.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/small_logo.png" class="logo__image only-light" alt="Python for health data science. - Home"/>
    <script>document.write(`<img src="../../../_static/small_logo.png" class="logo__image only-dark" alt="Python for health data science. - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../front_page.html">
                    Preface
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../001_setup/contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../001_setup/install.html">Install python and an IDE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../001_setup/git.html">GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../001_setup/conda.html">Conda virtual environment</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../001_setup/prereq.html">Python Prerequisites</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../001_setup/prereq/01_list_comp.html">List comprehensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../001_setup/prereq/02_dicts.html">Dictionarys</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../001_setup/prereq/04_scope.html">Variable Scope</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../001_setup/prereq/05_pep8.html">Coding Standards</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Algorithms and computational modelling</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../01_algorithms/01_design.html">The importance of design</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../01_algorithms/01_design/01_primes.html">Computing prime numbers</a></li>

<li class="toctree-l2"><a class="reference internal" href="../../01_algorithms/01_design/02_better_design.html">Improving the prime sieve code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01_algorithms/01_design/03_micro_opt.html">Do micro-optimisations matter?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01_algorithms/01_design/04_summing_up.html">Summing up</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../01_algorithms/02_oop.html">Designing using objects</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../01_algorithms/02_oop/01_python_classes.html">A world of objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01_algorithms/02_oop/02_oop_sim.html">Case study: ABS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01_algorithms/02_oop/03_oop_cv.html">Case study: Cross-validation</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../01_algorithms/03_numpy.html">Scientific coding in <code class="docutils literal notranslate"><span class="pre">numpy</span></code></a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../01_algorithms/03_numpy/01_performance.html">Arrays versus lists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01_algorithms/03_numpy/02_vectors.html">Vectors and matricies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01_algorithms/03_numpy/03_slicing.html">Array slicing and indexing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01_algorithms/03_numpy/04_algebra.html">Array algebra</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01_algorithms/03_numpy/05_statistics.html">Statistical procedures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01_algorithms/03_numpy/05a_regression.html">Regression using arrays</a></li>

<li class="toctree-l2"><a class="reference internal" href="../../01_algorithms/03_numpy/06_sampling.html">Random variables and simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01_algorithms/03_numpy/07_advanced_iter.html">Advanced Array Iteration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01_algorithms/03_numpy/08_cs1.html">Case study 1: a bootstrap routine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01_algorithms/03_numpy/09_cs2.html">Case study 2: prime sieve</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01_algorithms/03_numpy/10_cs3.html">Case study 3: online statistics</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../01_algorithms/04_exercises.html">Exercises</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../01_algorithms/04_exercises/01_science_funcs.html">Coding scientific functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01_algorithms/04_exercises/02_basic_oop.html">Basic Object Orientated Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01_algorithms/04_exercises/02_array.html">Working with an <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01_algorithms/04_exercises/04_numpy_stats.html">Statistical procedures in <code class="docutils literal notranslate"><span class="pre">numpy</span></code></a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../01_algorithms/05_debug.html">Debug challenges</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../01_algorithms/05_debug/01_debug_numpy.html"><code class="docutils literal notranslate"><span class="pre">numpy</span></code> debug</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../01_algorithms/06_solutions.html">Solutions</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../01_algorithms/06_solutions/01_science_funcs.html">Coding scientific functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01_algorithms/06_solutions/02_basic_oop.html">Basic Object Orientated Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01_algorithms/06_solutions/02_array.html">Working with an <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../01_algorithms/06_solutions/04_numpy_stats.html">Statistical procedures in <code class="docutils literal notranslate"><span class="pre">numpy</span></code></a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Statistical Programming</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../01_pandas_front_page.html">Data wrangling</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="01_intro_pandas.html">Introduction to <strong><code class="docutils literal notranslate"><span class="pre">pandas</span></code></strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="02_files.html">Working with files</a></li>
<li class="toctree-l2"><a class="reference internal" href="03_non_standard_download.html">Case study: a large remote dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="04_datetimes.html">Managing time series</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Analysing real data sets</a></li>
<li class="toctree-l2"><a class="reference internal" href="06_cs_combining.html">Case study: Combining multiple sources</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../02_visual_front_page.html">Visualising data</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../02_matplotlib/01_matplotlib.html">Introduction to <code class="docutils literal notranslate"><span class="pre">Matplotlib</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../02_matplotlib/02_matplotlib2.html">Multiple subplots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02_matplotlib/03_cs_hm.html">Case study: heat map</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02_matplotlib/02_plotting_time_series.html">Case Study: ED Time Series</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../03_exercises_front_page.html">Exercises</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../03_exercises/00_dataframes.html">Working with a <code class="docutils literal notranslate"><span class="pre">pandas.Dataframe</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../03_exercises/01_data_wrangling_matplotlib.html">ED data wrangling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03_exercises/02_stroke_data_wrangling.html">Stroke data wrangling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03_exercises/03_visualise_ts.html">Visualising time series data</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../04_solutions_front_page.html">Solutions</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../04_solutions/00_dataframes.html">Working with a <code class="docutils literal notranslate"><span class="pre">pandas.Dataframe</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../04_solutions/01_data_wrangling_matplotlib_solutions.html">ED Data Wrangling Exercises</a></li>
<li class="toctree-l2"><a class="reference internal" href="../04_solutions/02_stroke_data_wrangling_solutions.html">Stroke data wrangling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../04_solutions/03_visualise_ts_SOLUTIONS.html">Visualising time series data</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Managing Data Science Projects</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../03_mgt/03_vc_front_page.html">Version control</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../03_mgt/01_git/02_git.html">Introducing Git</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../03_mgt/01_git/03_cs_1.html">Case study: Basic use of Git</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../03_mgt/01_git/04_cs_2.html">Case study: roll back and bug fix</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../03_mgt/01_git/05_cs_3.html">Case study: Branching and merging</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../03_mgt/03_mgt_front_page.html">Deployment</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../03_mgt/02_packaging/01_python_packages.html">Local python packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../03_mgt/03_pypi/01_local.html">Installable Python packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../03_mgt/03_pypi/02_github.html">Install from GitHub</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../03_mgt/03_pypi/03_pypi.html">Publish a package on PyPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../03_mgt/03_pypi/04_automation.html">Automation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../03_mgt/04_binder/01_binder.html">BinderHub</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../03_mgt/04_exercises_front_page.html">Exercises</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../03_mgt/04_exercises/01_python_packages.html">Python package exercise</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../03_mgt/04_exercises/02_conda.html">Using <code class="docutils literal notranslate"><span class="pre">conda</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../03_mgt/04_exercises/03_binder.html">Binderhub exercises</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../03_mgt/05_solutions_front_page.html">Solutions</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../03_mgt/05_solutions/01_python_packages_solutions.html">Python package exercise</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../appendix/acknowledge.html">Acknowledgements</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendix Basic Python</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../appendix/fp_lectures.html">Lectures</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../appendix/lectures/Lecture1.html">Python Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../appendix/lectures/Lecture2.html">Conditionals and Loops</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../appendix/fp_practicals.html">Practicals</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../appendix/labs/01_basics.html">Basic Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../appendix/labs/debug1.html">Debug challenge 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../appendix/labs/02_basics.html">Conditionals and Loops</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../appendix/labs/debug2.html">Debug challenge 2</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/health-data-science-OR/coding-for-ml/main?urlpath=lab/tree/content/02_stat_prog/01_pandas/05_analysing.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Binder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Binder logo" src="../../../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li><a href="https://colab.research.google.com/github/health-data-science-OR/coding-for-ml/blob/main/content/02_stat_prog/01_pandas/05_analysing.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Colab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Colab logo" src="../../../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="initThebeSBT()"
  class="btn btn-sm btn-launch-thebe dropdown-item"
  title="Launch Thebe"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="btn__text-container">Live Code</span>
</button>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/health-data-science-OR/coding-for-ml" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/health-data-science-OR/coding-for-ml/issues/new?title=Issue%20on%20page%20%2Fcontent/02_stat_prog/01_pandas/05_analysing.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/content/02_stat_prog/01_pandas/05_analysing.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Analysing real data sets</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-slight-clean-up-of-the-dataset">A slight clean-up of the dataset</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#translating-dutch-column-names-and-categories-to-english">Translating Dutch Column Names and Categories to English</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#recoding-nan">Recoding <code class="docutils literal notranslate"><span class="pre">NaN</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#correcting-the-data-type-of-columns">Correcting the data type of columns</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pulling-it-together-in-a-single-function">Pulling it together in a single function</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#method-chaining-implementation">Method chaining implementation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#visualising-the-number-of-cases-over-time">Visualising the number of cases over time.</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#but-first-more-wrangling">But first…. more wrangling!</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="analysing-real-data-sets">
<h1>Analysing real data sets<a class="headerlink" href="#analysing-real-data-sets" title="Link to this heading">#</a></h1>
<p>Let’s take a look at some of the analysis and visualisation functionality built into <code class="docutils literal notranslate"><span class="pre">pandas</span></code>. We will work with a real dataset.  The dataset describes COVID-19 cases, hosptialisation and deaths in the Netherlands between Feb and Nov 2020. The dataset is part of a larger public dataset published under a CC-BY 4.0 license. To see the source follow the link below:</p>
<blockquote>
<div><p>De Bruin, J, Voorvaart, R, Menger, V, Kocken, I, &amp; Phil, T. (2020). Novel Coronavirus (COVID-19) Cases in The Netherlands (Version v2020.11.17) [Data set]. Zenodo. <a class="reference external" href="http://doi.org/10.5281/zenodo.4278891">http://doi.org/10.5281/zenodo.4278891</a></p>
</div></blockquote>
<p>We will use this dataset to put into practice some of existing <code class="docutils literal notranslate"><span class="pre">pandas</span></code> skills and also learn a few new tools to help us understand and visualise the data.</p>
<p>The first actions we will take are importing <code class="docutils literal notranslate"><span class="pre">numpy</span></code> and <code class="docutils literal notranslate"><span class="pre">pandas</span></code>, read in the dataset and have a look at the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> information.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">DATA_URL</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/health-data-science-OR/&#39;</span> \
            <span class="o">+</span> <span class="s1">&#39;hpdm139-datasets/main/RIVM_NL_provincial.csv&#39;</span>
<span class="n">neth_covid</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">DATA_URL</span><span class="p">)</span>
<span class="n">neth_covid</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 10335 entries, 0 to 10334
Data columns (total 6 columns):
 #   Column            Non-Null Count  Dtype  
---  ------            --------------  -----  
 0   Datum             10335 non-null  object 
 1   Provincienaam     9540 non-null   object 
 2   Provinciecode     10335 non-null  int64  
 3   Type              10335 non-null  object 
 4   Aantal            9906 non-null   float64
 5   AantalCumulatief  9945 non-null   float64
dtypes: float64(2), int64(1), object(3)
memory usage: 484.6+ KB
</pre></div>
</div>
</div>
</div>
<p>The meta data summary of the <code class="docutils literal notranslate"><span class="pre">Dataframe</span></code> provides useful information.  Firstly, we can see that a number of fields have missing data.  Secondly, the column names are in Dutch.</p>
<ul class="simple">
<li><p>Datum = date</p></li>
<li><p>Provincienaam = Province name e.g. ‘Gronigen’</p></li>
<li><p>Provinciecode = Province code integer</p></li>
<li><p>Aantal = number</p></li>
<li><p>AantalCumulatief = cumulative number</p></li>
</ul>
<p>Let’s take a peek at the head and tail of the dataset.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">neth_covid</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Datum</th>
      <th>Provincienaam</th>
      <th>Provinciecode</th>
      <th>Type</th>
      <th>Aantal</th>
      <th>AantalCumulatief</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2020-02-27</td>
      <td>NaN</td>
      <td>-1</td>
      <td>Overleden</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2020-02-27</td>
      <td>NaN</td>
      <td>-1</td>
      <td>Totaal</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2020-02-27</td>
      <td>NaN</td>
      <td>-1</td>
      <td>Ziekenhuisopname</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2020-02-27</td>
      <td>Groningen</td>
      <td>20</td>
      <td>Overleden</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2020-02-27</td>
      <td>Groningen</td>
      <td>20</td>
      <td>Totaal</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">neth_covid</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Datum</th>
      <th>Provincienaam</th>
      <th>Provinciecode</th>
      <th>Type</th>
      <th>Aantal</th>
      <th>AantalCumulatief</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>10330</th>
      <td>2020-11-17</td>
      <td>Noord-Brabant</td>
      <td>30</td>
      <td>Totaal</td>
      <td>847.0</td>
      <td>71925.0</td>
    </tr>
    <tr>
      <th>10331</th>
      <td>2020-11-17</td>
      <td>Noord-Brabant</td>
      <td>30</td>
      <td>Ziekenhuisopname</td>
      <td>7.0</td>
      <td>3319.0</td>
    </tr>
    <tr>
      <th>10332</th>
      <td>2020-11-17</td>
      <td>Limburg</td>
      <td>31</td>
      <td>Overleden</td>
      <td>0.0</td>
      <td>842.0</td>
    </tr>
    <tr>
      <th>10333</th>
      <td>2020-11-17</td>
      <td>Limburg</td>
      <td>31</td>
      <td>Totaal</td>
      <td>266.0</td>
      <td>21253.0</td>
    </tr>
    <tr>
      <th>10334</th>
      <td>2020-11-17</td>
      <td>Limburg</td>
      <td>31</td>
      <td>Ziekenhuisopname</td>
      <td>2.0</td>
      <td>1743.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Our peeking has again revealed some useful information.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Provincienaam</span></code> is <code class="docutils literal notranslate"><span class="pre">NaN</span></code> (Not a Number i.e. missing) when the reporting the overall totals across all provinces.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Aantal</span></code> and <code class="docutils literal notranslate"><span class="pre">AantalCumulatief</span></code> record <code class="docutils literal notranslate"><span class="pre">NaN</span></code> in early parts of the pandemic dataset when no cases are being reported.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Type</span></code> is a categorical column with three categories in Dutch. Approximate translations are:</p>
<ul>
<li><p>Totaal = total (positive cases)</p></li>
<li><p>Ziekenhuisopname = hospital admissions</p></li>
<li><p>Overleden = deaths attributable to COVID19</p></li>
</ul>
</li>
</ul>
<section id="a-slight-clean-up-of-the-dataset">
<h2>A slight clean-up of the dataset<a class="headerlink" href="#a-slight-clean-up-of-the-dataset" title="Link to this heading">#</a></h2>
<p>Now that we have had a look at the raw data let’s use <code class="docutils literal notranslate"><span class="pre">pandas</span></code> perform a small clean-up operation that will make our life much easier when we get to analysis.  We will firstly break this procedure down into discrete steps and pull that together is a function.  I’ll then show you an alternative cool way of organising your <code class="docutils literal notranslate"><span class="pre">pandas</span></code> using <strong>method chaining</strong>.</p>
<section id="translating-dutch-column-names-and-categories-to-english">
<h3>Translating Dutch Column Names and Categories to English<a class="headerlink" href="#translating-dutch-column-names-and-categories-to-english" title="Link to this heading">#</a></h3>
<p>Let’s translate the header columns first.  That’s relatively simple as we just replace the list of existing headers with their translations.  We will also update <code class="docutils literal notranslate"><span class="pre">type</span></code> to <code class="docutils literal notranslate"><span class="pre">metric</span></code> as that is more descriptive of the data that the column actually holds.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">translated_names</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Datum&#39;</span><span class="p">:</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> 
                    <span class="s1">&#39;Provincienaam&#39;</span><span class="p">:</span><span class="s1">&#39;province&#39;</span><span class="p">,</span> 
                    <span class="s1">&#39;Provinciecode&#39;</span><span class="p">:</span><span class="s1">&#39;province_code&#39;</span><span class="p">,</span> 
                    <span class="s1">&#39;Type&#39;</span><span class="p">:</span><span class="s1">&#39;metric&#39;</span><span class="p">,</span> 
                    <span class="s1">&#39;Aantal&#39;</span><span class="p">:</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> 
                    <span class="s1">&#39;AantalCumulatief&#39;</span><span class="p">:</span><span class="s1">&#39;n_cum&#39;</span><span class="p">}</span>

<span class="n">neth_covid</span> <span class="o">=</span> <span class="n">neth_covid</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">translated_names</span><span class="p">)</span>
<span class="n">neth_covid</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date</th>
      <th>province</th>
      <th>province_code</th>
      <th>metric</th>
      <th>n</th>
      <th>n_cum</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2020-02-27</td>
      <td>NaN</td>
      <td>-1</td>
      <td>Overleden</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2020-02-27</td>
      <td>NaN</td>
      <td>-1</td>
      <td>Totaal</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2020-02-27</td>
      <td>NaN</td>
      <td>-1</td>
      <td>Ziekenhuisopname</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2020-02-27</td>
      <td>Groningen</td>
      <td>20</td>
      <td>Overleden</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2020-02-27</td>
      <td>Groningen</td>
      <td>20</td>
      <td>Totaal</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>To recode the <code class="docutils literal notranslate"><span class="pre">metric</span></code> column we can use the <code class="docutils literal notranslate"><span class="pre">.apply(&lt;function&gt;)</span></code> method.  This applies a function to each row in the <code class="docutils literal notranslate"><span class="pre">Dataframe</span></code>.  It only makes sense to do this for the <code class="docutils literal notranslate"><span class="pre">metric</span></code> column so we need to be careful about what data we pass in.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># this is a tiered dict {col_name:{dutch key :english value}}</span>
<span class="n">translations</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;metric&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Overleden&#39;</span><span class="p">:</span><span class="s1">&#39;deaths&#39;</span><span class="p">,</span>
                           <span class="s1">&#39;Totaal&#39;</span><span class="p">:</span><span class="s1">&#39;total_cases&#39;</span><span class="p">,</span>
                           <span class="s1">&#39;Ziekenhuisopname&#39;</span><span class="p">:</span><span class="s1">&#39;hosp_admit&#39;</span><span class="p">}}</span>

<span class="n">neth_covid</span> <span class="o">=</span> <span class="n">neth_covid</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">translations</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">neth_covid</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date</th>
      <th>province</th>
      <th>province_code</th>
      <th>metric</th>
      <th>n</th>
      <th>n_cum</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2020-02-27</td>
      <td>NaN</td>
      <td>-1</td>
      <td>deaths</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2020-02-27</td>
      <td>NaN</td>
      <td>-1</td>
      <td>total_cases</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2020-02-27</td>
      <td>NaN</td>
      <td>-1</td>
      <td>hosp_admit</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2020-02-27</td>
      <td>Groningen</td>
      <td>20</td>
      <td>deaths</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2020-02-27</td>
      <td>Groningen</td>
      <td>20</td>
      <td>total_cases</td>
      <td>NaN</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="recoding-nan">
<h3>Recoding <code class="docutils literal notranslate"><span class="pre">NaN</span></code><a class="headerlink" href="#recoding-nan" title="Link to this heading">#</a></h3>
<p>The early case numbers are set to <code class="docutils literal notranslate"><span class="pre">NaN</span></code> as opposed to zero.  The column <code class="docutils literal notranslate"><span class="pre">province</span></code> is always <code class="docutils literal notranslate"><span class="pre">NaN</span></code> when it is reporting the total for all provinces.  Let’s update that to <code class="docutils literal notranslate"><span class="pre">overall</span></code>.</p>
<p>To do this we can make use of the <code class="docutils literal notranslate"><span class="pre">.fillna</span></code> method.  We can replace the different fields in one go by passing in a dict that contains a list of column name keys and replacement values</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">recoding</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;n&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;n_cum&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;province&#39;</span><span class="p">:</span> <span class="s1">&#39;overall&#39;</span><span class="p">}</span>
<span class="n">neth_covid</span> <span class="o">=</span> <span class="n">neth_covid</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">recoding</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">neth_covid</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date</th>
      <th>province</th>
      <th>province_code</th>
      <th>metric</th>
      <th>n</th>
      <th>n_cum</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2020-02-27</td>
      <td>overall</td>
      <td>-1</td>
      <td>deaths</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2020-02-27</td>
      <td>overall</td>
      <td>-1</td>
      <td>total_cases</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2020-02-27</td>
      <td>overall</td>
      <td>-1</td>
      <td>hosp_admit</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2020-02-27</td>
      <td>Groningen</td>
      <td>20</td>
      <td>deaths</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2020-02-27</td>
      <td>Groningen</td>
      <td>20</td>
      <td>total_cases</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="correcting-the-data-type-of-columns">
<h3>Correcting the data type of columns<a class="headerlink" href="#correcting-the-data-type-of-columns" title="Link to this heading">#</a></h3>
<p>The changes we want to make are:</p>
<ol class="arabic simple">
<li><p>Convert <code class="docutils literal notranslate"><span class="pre">n</span></code> and <code class="docutils literal notranslate"><span class="pre">n_cum</span></code> from floats to integer data types (as it is count data)</p></li>
<li><p>Set<code class="docutils literal notranslate"><span class="pre">date</span></code> to a proper data time field.</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">metric</span></code> to a <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> field (as it only contains three types of category).</p></li>
</ol>
<blockquote>
<div><p>Why bother setting <code class="docutils literal notranslate"><span class="pre">metric</span></code> to have the <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> datatype?  For one thing it slightly reduces memory requirements.  But for me the main benefit is that it tells another third party code, particularly code that is used for plotting, that the field is categorical and should be treated differently.</p>
</div></blockquote>
<p>For casting data types a <code class="docutils literal notranslate"><span class="pre">pandas.Dataframe</span></code> includes the <code class="docutils literal notranslate"><span class="pre">.astype</span></code> method.  This accepts a dict that contains column name keys and datatype values.  Here we will cast to <code class="docutils literal notranslate"><span class="pre">np.int32</span></code>.  The function returns an updated copy of the dataframe.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># change datatype of column</span>
<span class="n">neth_covid</span> <span class="o">=</span> <span class="n">neth_covid</span><span class="o">.</span><span class="n">astype</span><span class="p">({</span><span class="s1">&#39;n&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">,</span> <span class="s1">&#39;n_cum&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div>
<p>We can deal with the <code class="docutils literal notranslate"><span class="pre">date</span></code> and <code class="docutils literal notranslate"><span class="pre">metric</span></code> columns in one step using the <code class="docutils literal notranslate"><span class="pre">.assign</span></code> method.  The method creates new columns, but you can also use it to overwrite existing ones. The syntax might take a bit of getting used to if you are unfamiliar with <strong>lambda expressions</strong> in python.</p>
<p>For those who are unfamilar a lambda expression is an annoymous function: a function without a name.  Typically they are very simple and used inline within some other code. For example, here is a annoymous function with parameters <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code> that returns the product.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span><span class="p">)(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">10</span>
</pre></div>
</div>
<blockquote>
<div><p>Note that the parameters come before the semi-colon and the function logic afterwards.</p>
</div></blockquote>
<p>But like normal functions they are first class objects:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">func</span> <span class="o">=</span> <span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># some other operations and code</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">func</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">10</span>
</pre></div>
</div>
<p>For our purposes in <code class="docutils literal notranslate"><span class="pre">pandas</span></code> we can use it to create a new column.  Here the parameter <code class="docutils literal notranslate"><span class="pre">x</span></code> is actually the <code class="docutils literal notranslate"><span class="pre">Dataframe</span></code>.  So to access the <code class="docutils literal notranslate"><span class="pre">date</span></code> column we use <code class="docutils literal notranslate"><span class="pre">x['date']</span></code> rather than <code class="docutils literal notranslate"><span class="pre">neth_covid['date']</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">neth_covid</span> <span class="o">=</span> <span class="n">neth_covid</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">date</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]))</span>
</pre></div>
</div>
<p>To <code class="docutils literal notranslate"><span class="pre">assign</span></code> more than one colunm add another annoymous function.  The below overwrites <code class="docutils literal notranslate"><span class="pre">date</span></code> and <code class="docutils literal notranslate"><span class="pre">metric</span></code> with updated columns based on the old values.</p>
<blockquote>
<div><p>If we wanted to create new columns we would use a different column name.</p>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">neth_covid</span> <span class="o">=</span> <span class="n">neth_covid</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">date</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]),</span>
                               <span class="n">metric</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;metric&#39;</span><span class="p">]))</span>  
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">neth_covid</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date</th>
      <th>province</th>
      <th>province_code</th>
      <th>metric</th>
      <th>n</th>
      <th>n_cum</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>10330</th>
      <td>2020-11-17</td>
      <td>Noord-Brabant</td>
      <td>30</td>
      <td>total_cases</td>
      <td>847</td>
      <td>71925</td>
    </tr>
    <tr>
      <th>10331</th>
      <td>2020-11-17</td>
      <td>Noord-Brabant</td>
      <td>30</td>
      <td>hosp_admit</td>
      <td>7</td>
      <td>3319</td>
    </tr>
    <tr>
      <th>10332</th>
      <td>2020-11-17</td>
      <td>Limburg</td>
      <td>31</td>
      <td>deaths</td>
      <td>0</td>
      <td>842</td>
    </tr>
    <tr>
      <th>10333</th>
      <td>2020-11-17</td>
      <td>Limburg</td>
      <td>31</td>
      <td>total_cases</td>
      <td>266</td>
      <td>21253</td>
    </tr>
    <tr>
      <th>10334</th>
      <td>2020-11-17</td>
      <td>Limburg</td>
      <td>31</td>
      <td>hosp_admit</td>
      <td>2</td>
      <td>1743</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="pulling-it-together-in-a-single-function">
<h3>Pulling it together in a single function<a class="headerlink" href="#pulling-it-together-in-a-single-function" title="Link to this heading">#</a></h3>
<p>In summary, we have put together a simple dataset cleaning process in <code class="docutils literal notranslate"><span class="pre">pandas</span></code>.  Let’s tidy up our code and put it all in a single function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">clean_covid_dataset</span><span class="p">(</span><span class="n">csv_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Helper function to clean the netherlands covid dataset.</span>
<span class="sd">    </span>
<span class="sd">    Params:</span>
<span class="sd">    ------</span>
<span class="sd">    csv_path: str</span>
<span class="sd">        Path or URL to Comman Seperated Value file containing Dutch Covid data.</span>
<span class="sd">        </span>
<span class="sd">    Returns:</span>
<span class="sd">    -------</span>
<span class="sd">    pd.Dataframe</span>
<span class="sd">        Cleaned Covid19 dataset.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">translated_names</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Datum&#39;</span><span class="p">:</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> 
                        <span class="s1">&#39;Provincienaam&#39;</span><span class="p">:</span><span class="s1">&#39;province&#39;</span><span class="p">,</span> 
                        <span class="s1">&#39;Provinciecode&#39;</span><span class="p">:</span><span class="s1">&#39;province_code&#39;</span><span class="p">,</span> 
                        <span class="s1">&#39;Type&#39;</span><span class="p">:</span><span class="s1">&#39;metric&#39;</span><span class="p">,</span> 
                        <span class="s1">&#39;Aantal&#39;</span><span class="p">:</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> 
                        <span class="s1">&#39;AantalCumulatief&#39;</span><span class="p">:</span><span class="s1">&#39;n_cum&#39;</span><span class="p">}</span>

    <span class="n">translated_metrics</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;metric&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Overleden&#39;</span><span class="p">:</span><span class="s1">&#39;deaths&#39;</span><span class="p">,</span>
                                     <span class="s1">&#39;Totaal&#39;</span><span class="p">:</span><span class="s1">&#39;total_cases&#39;</span><span class="p">,</span>
                                     <span class="s1">&#39;Ziekenhuisopname&#39;</span><span class="p">:</span><span class="s1">&#39;hosp_admit&#39;</span><span class="p">}}</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">csv_path</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">translated_names</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">translated_metrics</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;n&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;n_cum&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;province&#39;</span><span class="p">:</span> <span class="s1">&#39;overall&#39;</span><span class="p">})</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">astype</span><span class="p">({</span><span class="s1">&#39;n&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">,</span> <span class="s1">&#39;n_cum&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">})</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">date</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]),</span>
                   <span class="n">metric</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;metric&#39;</span><span class="p">]))</span>    
    <span class="k">return</span> <span class="n">df</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># test</span>
<span class="n">neth_covid</span> <span class="o">=</span> <span class="n">clean_covid_dataset</span><span class="p">(</span><span class="n">DATA_URL</span><span class="p">)</span>
<span class="n">neth_covid</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 10335 entries, 0 to 10334
Data columns (total 6 columns):
 #   Column         Non-Null Count  Dtype         
---  ------         --------------  -----         
 0   date           10335 non-null  datetime64[ns]
 1   province       10335 non-null  object        
 2   province_code  10335 non-null  int64         
 3   metric         10335 non-null  category      
 4   n              10335 non-null  int32         
 5   n_cum          10335 non-null  int32         
dtypes: category(1), datetime64[ns](1), int32(2), int64(1), object(1)
memory usage: 333.3+ KB
</pre></div>
</div>
</div>
</div>
</section>
<section id="method-chaining-implementation">
<h3>Method chaining implementation<a class="headerlink" href="#method-chaining-implementation" title="Link to this heading">#</a></h3>
<p>The above solution for cleaning the dataset works fine.  However, we can modify our code slightly and (depending on who you ask) make it more elegant and readable using <strong>method chaining</strong>.</p>
<p>You should notice a pattern in our original <code class="docutils literal notranslate"><span class="pre">clean_covid_dataset</span></code> function.  We repeatedly perform an operation and return a new version of the dataset.  For example,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># read CSV data and return as dataframe</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

<span class="c1"># rename columns and return new dataframe</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">translated_names</span><span class="p">)</span>

<span class="c1"># replace dutch with english words and return new dataframe</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">translated_metrics</span><span class="p">)</span>
</pre></div>
</div>
<p>Method chaining means that we don’t need to actually to include the <code class="docutils literal notranslate"><span class="pre">df</span> <span class="pre">=</span> <span class="pre">df.</span></code> in each line of the code listing above.  We would instead replace it with the more elegant</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">translated_names</span><span class="p">)</span>
        <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">translated_metrics</span><span class="p">)</span>
     <span class="p">)</span>
</pre></div>
</div>
<p>Note that we enclose the chained methods within <code class="docutils literal notranslate"><span class="pre">(</span></code> and <code class="docutils literal notranslate"><span class="pre">)</span></code>.  We also don’t need to include the <code class="docutils literal notranslate"><span class="pre">df</span></code> infront of <code class="docutils literal notranslate"><span class="pre">.rename</span></code> and <code class="docutils literal notranslate"><span class="pre">.replace</span></code>.</p>
<p>If we used method chaining our <code class="docutils literal notranslate"><span class="pre">clean_covid_dataset</span></code> function becomes:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">clean_covid_dataset</span><span class="p">(</span><span class="n">csv_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Helper function to clean the netherlands covid dataset.</span>
<span class="sd">    </span>
<span class="sd">    Params:</span>
<span class="sd">    -------</span>
<span class="sd">    csv_path: str</span>
<span class="sd">        Path to Dutch Covid CSV file</span>
<span class="sd">    &#39;&#39;&#39;</span>    
    
    <span class="n">translated_names</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Datum&#39;</span><span class="p">:</span><span class="s1">&#39;date&#39;</span><span class="p">,</span> 
                        <span class="s1">&#39;Provincienaam&#39;</span><span class="p">:</span><span class="s1">&#39;province&#39;</span><span class="p">,</span> 
                        <span class="s1">&#39;Provinciecode&#39;</span><span class="p">:</span><span class="s1">&#39;province_code&#39;</span><span class="p">,</span> 
                        <span class="s1">&#39;Type&#39;</span><span class="p">:</span><span class="s1">&#39;metric&#39;</span><span class="p">,</span> 
                        <span class="s1">&#39;Aantal&#39;</span><span class="p">:</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> 
                        <span class="s1">&#39;AantalCumulatief&#39;</span><span class="p">:</span><span class="s1">&#39;n_cum&#39;</span><span class="p">}</span>

    <span class="n">translated_metrics</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;metric&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Overleden&#39;</span><span class="p">:</span><span class="s1">&#39;deaths&#39;</span><span class="p">,</span>
                                     <span class="s1">&#39;Totaal&#39;</span><span class="p">:</span><span class="s1">&#39;total_cases&#39;</span><span class="p">,</span>
                                     <span class="s1">&#39;Ziekenhuisopname&#39;</span><span class="p">:</span><span class="s1">&#39;hosp_admit&#39;</span><span class="p">}}</span>
    
    <span class="c1"># method chaining solution.  Can be more readable</span>
    <span class="n">df</span> <span class="o">=</span> <span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">csv_path</span><span class="p">)</span>
            <span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">translated_names</span><span class="p">)</span>
            <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">translated_metrics</span><span class="p">)</span>
            <span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;n&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;n_cum&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;province&#39;</span><span class="p">:</span> <span class="s1">&#39;overall&#39;</span><span class="p">})</span>
            <span class="o">.</span><span class="n">astype</span><span class="p">({</span><span class="s1">&#39;n&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">,</span> <span class="s1">&#39;n_cum&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">})</span>
            <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">date</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]),</span>
                    <span class="n">metric</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;metric&#39;</span><span class="p">]))</span>
    <span class="p">)</span>
    
    <span class="k">return</span> <span class="n">df</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">neth_covid</span> <span class="o">=</span> <span class="n">clean_covid_dataset</span><span class="p">(</span><span class="n">DATA_URL</span><span class="p">)</span>
<span class="n">neth_covid</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date</th>
      <th>province</th>
      <th>province_code</th>
      <th>metric</th>
      <th>n</th>
      <th>n_cum</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2020-02-27</td>
      <td>overall</td>
      <td>-1</td>
      <td>deaths</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2020-02-27</td>
      <td>overall</td>
      <td>-1</td>
      <td>total_cases</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2020-02-27</td>
      <td>overall</td>
      <td>-1</td>
      <td>hosp_admit</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2020-02-27</td>
      <td>Groningen</td>
      <td>20</td>
      <td>deaths</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2020-02-27</td>
      <td>Groningen</td>
      <td>20</td>
      <td>total_cases</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>It is up to you how you implement your <code class="docutils literal notranslate"><span class="pre">pandas</span></code>.  Personally I think method chaining produces quite readable <code class="docutils literal notranslate"><span class="pre">pandas</span></code> code.  Its also less code (I’m a coder and inherently lazy!).  But note that both functions are equivalent and do the same thing!</p>
</section>
</section>
<section id="visualising-the-number-of-cases-over-time">
<h2>Visualising the number of cases over time.<a class="headerlink" href="#visualising-the-number-of-cases-over-time" title="Link to this heading">#</a></h2>
<p>We will be looking at visualisation in more detail when we introduce <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>For now we will see how <code class="docutils literal notranslate"><span class="pre">pandas</span></code> includes a high level plotting API for <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>.</p>
<section id="but-first-more-wrangling">
<h3>But first…. more wrangling!<a class="headerlink" href="#but-first-more-wrangling" title="Link to this heading">#</a></h3>
<p>The cleaned dataset is in what we might call a tidy or long format.  That is there are multiple metric entries per date for each province.  We can convert this into a “wide format”, where each metric has its own column per date and province using the <code class="docutils literal notranslate"><span class="pre">pivot_table</span></code> method.</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">pivot_table</span></code> is quite a powerful function and there are plenty of options of how to use it.  I recommend experimenting with it on different dataset.  I’ve always found it useful for tasks similar to the below.</p>
</div></blockquote>
<p>The code below we convert the metric column into six columns: three columns for <code class="docutils literal notranslate"><span class="pre">n</span></code> (the daily count) and <code class="docutils literal notranslate"><span class="pre">n_cum</span></code> (the cumulative count).  We specify that using the <code class="docutils literal notranslate"><span class="pre">columns</span></code> parameter.  We are also creating a <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> based on <code class="docutils literal notranslate"><span class="pre">['province',</span> <span class="pre">'province_code','date']</span></code>.  The order you choose here is important for how data is selected.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># wide format</span>
<span class="n">wf_covid</span> <span class="o">=</span> <span class="n">neth_covid</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;metric&#39;</span><span class="p">],</span> 
                                  <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;province&#39;</span><span class="p">,</span> <span class="s1">&#39;province_code&#39;</span><span class="p">,</span><span class="s1">&#39;date&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/tmp/ipykernel_597988/1719524877.py:2: FutureWarning: The default value of observed=False is deprecated and will change to observed=True in a future version of pandas. Specify observed=False to silence this warning and retain the current behavior
  wf_covid = neth_covid.pivot_table(columns=[&#39;metric&#39;],
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wf_covid</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th></th>
      <th></th>
      <th colspan="3" halign="left">n</th>
      <th colspan="3" halign="left">n_cum</th>
    </tr>
    <tr>
      <th></th>
      <th></th>
      <th>metric</th>
      <th>deaths</th>
      <th>hosp_admit</th>
      <th>total_cases</th>
      <th>deaths</th>
      <th>hosp_admit</th>
      <th>total_cases</th>
    </tr>
    <tr>
      <th>province</th>
      <th>province_code</th>
      <th>date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">Drenthe</th>
      <th rowspan="5" valign="top">22</th>
      <th>2020-02-27</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2020-02-28</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2020-02-29</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2020-03-01</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>2020-03-02</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>What may not be obvious is that we now have a <code class="docutils literal notranslate"><span class="pre">pandas.Dataframe</span></code> with a multi-index.  The <code class="docutils literal notranslate"><span class="pre">.info()</span></code> method reveals the details:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wf_covid</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
MultiIndex: 3445 entries, (&#39;Drenthe&#39;, np.int64(22), Timestamp(&#39;2020-02-27 00:00:00&#39;)) to (&#39;overall&#39;, np.int64(-1), Timestamp(&#39;2020-11-17 00:00:00&#39;))
Data columns (total 6 columns):
 #   Column                Non-Null Count  Dtype  
---  ------                --------------  -----  
 0   (n, deaths)           3445 non-null   float64
 1   (n, hosp_admit)       3445 non-null   float64
 2   (n, total_cases)      3445 non-null   float64
 3   (n_cum, deaths)       3445 non-null   float64
 4   (n_cum, hosp_admit)   3445 non-null   float64
 5   (n_cum, total_cases)  3445 non-null   float64
dtypes: float64(6)
memory usage: 186.6+ KB
</pre></div>
</div>
</div>
</div>
<p>Let’s take a scenario where we want to select data for the <code class="docutils literal notranslate"><span class="pre">Groningen</span></code> province of the Netherlands.  We can do this using <code class="docutils literal notranslate"><span class="pre">.loc</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># get the groningen data</span>
<span class="n">wf_covid</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;Groningen&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th></th>
      <th colspan="3" halign="left">n</th>
      <th colspan="3" halign="left">n_cum</th>
    </tr>
    <tr>
      <th></th>
      <th>metric</th>
      <th>deaths</th>
      <th>hosp_admit</th>
      <th>total_cases</th>
      <th>deaths</th>
      <th>hosp_admit</th>
      <th>total_cases</th>
    </tr>
    <tr>
      <th>province_code</th>
      <th>date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">20</th>
      <th>2020-02-27</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2020-02-28</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2020-02-29</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2020-03-01</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2020-03-02</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>This gives us the time series for just Groningen.  But note that we also have the <code class="docutils literal notranslate"><span class="pre">province_code</span></code> column included.  This is the 2nd level of the index - in fact it is redundant here as its value is unique for Groningen.  To remove it modify our indexing:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># get the groningen data.  note that we use 2 keys inside brackets.</span>
<span class="n">wf_covid</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="s1">&#39;Groningen&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">)]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="3" halign="left">n</th>
      <th colspan="3" halign="left">n_cum</th>
    </tr>
    <tr>
      <th>metric</th>
      <th>deaths</th>
      <th>hosp_admit</th>
      <th>total_cases</th>
      <th>deaths</th>
      <th>hosp_admit</th>
      <th>total_cases</th>
    </tr>
    <tr>
      <th>date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-02-27</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2020-02-28</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2020-02-29</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2020-03-01</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2020-03-02</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>columns are also a multi-index and we need to use indexing to narrow down the either the daily or cumulative counts.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wf_covid</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="s1">&#39;Groningen&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">)]</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>MultiIndex([(    &#39;n&#39;,      &#39;deaths&#39;),
            (    &#39;n&#39;,  &#39;hosp_admit&#39;),
            (    &#39;n&#39;, &#39;total_cases&#39;),
            (&#39;n_cum&#39;,      &#39;deaths&#39;),
            (&#39;n_cum&#39;,  &#39;hosp_admit&#39;),
            (&#39;n_cum&#39;, &#39;total_cases&#39;)],
           names=[None, &#39;metric&#39;])
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># get daily cases</span>
<span class="n">wf_covid</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="s1">&#39;Groningen&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">)][</span><span class="s1">&#39;n&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>metric</th>
      <th>deaths</th>
      <th>hosp_admit</th>
      <th>total_cases</th>
    </tr>
    <tr>
      <th>date</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-02-27</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2020-02-28</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2020-02-29</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2020-03-01</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2020-03-02</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We can easily plot one or more <code class="docutils literal notranslate"><span class="pre">Series</span></code> in a <code class="docutils literal notranslate"><span class="pre">Dataframe</span></code> by calling the <code class="docutils literal notranslate"><span class="pre">.plot</span></code> method.</p>
<blockquote>
<div><p>I tend to think of plot as a kitchen sink method.  Its accepts a very large number of <strong>optional</strong> parameters!  Check out the documentation <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.plot.html">here</a>.  In some ways this is bad practice when designing APIs, but it implementation does turn out to be very handy.</p>
</div></blockquote>
<p>I would argue that an absolute must is to specify the <code class="docutils literal notranslate"><span class="pre">figsize</span></code>.  For example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># pandas short hand for plotting daily cases</span>
<span class="n">wf_covid</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="s1">&#39;Groningen&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">)][</span><span class="s1">&#39;n&#39;</span><span class="p">][</span><span class="s1">&#39;total_cases&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Axes: xlabel=&#39;date&#39;&gt;
</pre></div>
</div>
<img alt="../../../_images/2c0c0c21674205eef3b28121979e95e2e20b212bd5667278615aa712ffc7d697.png" src="../../../_images/2c0c0c21674205eef3b28121979e95e2e20b212bd5667278615aa712ffc7d697.png" />
</div>
</div>
<p>With default settings in Jupyter you should see the following above the chart:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">AxesSubplot</span><span class="p">:</span><span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;date&#39;</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>This is because <code class="docutils literal notranslate"><span class="pre">.plot</span></code> returns a matplotlib axis object and the text above is the <code class="docutils literal notranslate"><span class="pre">__repr__</span></code>.  The object is very useful, but the print out isn’t! For now I’ll show you a couple of ways to avoid that appearing in your pristine notebooks.</p>
<p>The first is to assign the axis to a variable.  Convention is that the name <code class="docutils literal notranslate"><span class="pre">ax</span></code> is used.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">wf_covid</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="s1">&#39;Groningen&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">)][</span><span class="s1">&#39;n&#39;</span><span class="p">][</span><span class="s1">&#39;total_cases&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../../_images/2c0c0c21674205eef3b28121979e95e2e20b212bd5667278615aa712ffc7d697.png" src="../../../_images/2c0c0c21674205eef3b28121979e95e2e20b212bd5667278615aa712ffc7d697.png" />
</div>
</div>
<p>The second approach is to use a semi-colon after the python statement.  I see this used a lot online.  I’m always a bit suspicious this is because the author doesn’t really understand what is really happening.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wf_covid</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="s1">&#39;Groningen&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">)][</span><span class="s1">&#39;n&#39;</span><span class="p">][</span><span class="s1">&#39;total_cases&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">4</span><span class="p">));</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../../_images/2c0c0c21674205eef3b28121979e95e2e20b212bd5667278615aa712ffc7d697.png" src="../../../_images/2c0c0c21674205eef3b28121979e95e2e20b212bd5667278615aa712ffc7d697.png" />
</div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "health-data-science-OR/coding-for-ml",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./content/02_stat_prog/01_pandas"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="04_datetimes.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Managing time series</p>
      </div>
    </a>
    <a class="right-next"
       href="06_cs_combining.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Case study: Combining multiple sources</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-slight-clean-up-of-the-dataset">A slight clean-up of the dataset</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#translating-dutch-column-names-and-categories-to-english">Translating Dutch Column Names and Categories to English</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#recoding-nan">Recoding <code class="docutils literal notranslate"><span class="pre">NaN</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#correcting-the-data-type-of-columns">Correcting the data type of columns</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pulling-it-together-in-a-single-function">Pulling it together in a single function</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#method-chaining-implementation">Method chaining implementation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#visualising-the-number-of-cases-over-time">Visualising the number of cases over time.</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#but-first-more-wrangling">But first…. more wrangling!</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Thomas Monks
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>