
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Case study: roll back and bug fix</title>
    
  <link href="../../../_static/css/theme.css" rel="stylesheet" />
  <link href="../../../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/togglebutton.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Case study: Branching and merging" href="05_cs_3.html" />
    <link rel="prev" title="Case study: Basic use of Git" href="03_cs_1.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../../_static/small_logo.png" class="logo" alt="logo">
      
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../front_page.html">
   Preface
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Introduction
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../001_setup/contributing.html">
   Contributing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../001_setup/install.html">
   Install python and an IDE
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../001_setup/git.html">
   GitHub
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../001_setup/conda.html">
   Conda virtual environment
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../001_setup/docker.html">
   Docker
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Algorithms and computational modelling
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../01_algorithms/01_design.html">
   The importance of design
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../01_algorithms/01_design/01_primes.html">
     Computing prime numbers
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../01_algorithms/01_design/02_better_design.html">
     Improving the prime sieve code
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../01_algorithms/01_design/03_micro_opt.html">
     Do micro-optimisations matter?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../01_algorithms/01_design/04_summing_up.html">
     Summing up
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../01_algorithms/02_oop.html">
   Designing using objects
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../01_algorithms/02_oop/01_python_classes.html">
     A world of objects
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../01_algorithms/02_oop/02_oop_sim.html">
     Case study: ABS
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../01_algorithms/02_oop/03_oop_cv.html">
     Case study: Cross-validation
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../01_algorithms/03_numpy.html">
   Scientific coding in
   <code class="docutils literal notranslate">
    <span class="pre">
     numpy
    </span>
   </code>
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../01_algorithms/03_numpy/01_performance.html">
     Arrays versus lists
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../01_algorithms/03_numpy/02_vectors.html">
     Vectors and matricies
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../01_algorithms/03_numpy/03_slicing.html">
     Array slicing and indexing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../01_algorithms/03_numpy/04_algebra.html">
     Array algebra
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../01_algorithms/03_numpy/05_statistics.html">
     Statistical procedures
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../01_algorithms/03_numpy/05a_regression.html">
     Regression using arrays
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../01_algorithms/03_numpy/06_sampling.html">
     Random variables and simulation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../01_algorithms/03_numpy/07_advanced_iter.html">
     Advanced Array Iteration
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../01_algorithms/03_numpy/08_cs1.html">
     Case study 1: a bootstrap routine
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../01_algorithms/03_numpy/09_cs2.html">
     Case study 2: prime sieve
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../01_algorithms/03_numpy/10_cs3.html">
     Case study 3: online statistics
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../01_algorithms/04_exercises.html">
   Exercises
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../01_algorithms/04_exercises/01_science_funcs.html">
     Coding scientific functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../01_algorithms/04_exercises/02_basic_oop.html">
     Basic Object Orientated Methods
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../01_algorithms/04_exercises/02_array.html">
     Working with an
     <code class="docutils literal notranslate">
      <span class="pre">
       np.ndarray
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../01_algorithms/04_exercises/04_numpy_stats.html">
     Statistical procedures in
     <code class="docutils literal notranslate">
      <span class="pre">
       numpy
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../01_algorithms/05_debug.html">
   Debug challenges
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../01_algorithms/05_debug/01_debug_numpy.html">
     <code class="docutils literal notranslate">
      <span class="pre">
       numpy
      </span>
     </code>
     debug
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../01_algorithms/06_solutions.html">
   Solutions
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../01_algorithms/06_solutions/01_science_funcs.html">
     Coding scientific functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../01_algorithms/06_solutions/02_basic_oop.html">
     Basic Object Orientated Methods
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../01_algorithms/06_solutions/02_array.html">
     Working with an
     <code class="docutils literal notranslate">
      <span class="pre">
       np.ndarray
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../01_algorithms/06_solutions/04_numpy_stats.html">
     Statistical procedures in
     <code class="docutils literal notranslate">
      <span class="pre">
       numpy
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Statistical Programming
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../02_stat_prog/01_pandas_front_page.html">
   Data wrangling
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../02_stat_prog/01_pandas/01_intro_pandas.html">
     Introduction to
     <strong>
      <code class="docutils literal notranslate">
       <span class="pre">
        pandas
       </span>
      </code>
     </strong>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../02_stat_prog/01_pandas/02_files.html">
     Working with files
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../02_stat_prog/01_pandas/03_non_standard_download.html">
     Case study: a large remote dataset
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../02_stat_prog/01_pandas/04_datetimes.html">
     Managing time series
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../02_stat_prog/01_pandas/05_analysing.html">
     Analysing real data sets
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../02_stat_prog/01_pandas/06_cs_combining.html">
     Case study: Combining multiple sources
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../02_stat_prog/02_visual_front_page.html">
   Visualising data
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../02_stat_prog/02_matplotlib/01_matplotlib.html">
     Introduction to
     <code class="docutils literal notranslate">
      <span class="pre">
       Matplotlib
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../02_stat_prog/02_matplotlib/02_matplotlib2.html">
     Multiple subplots
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../02_stat_prog/02_matplotlib/03_cs_hm.html">
     Case study: heat map
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../02_stat_prog/02_matplotlib/02_plotting_time_series.html">
     Case Study: ED Time Series
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../02_stat_prog/03_exercises_front_page.html">
   Exercises
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../02_stat_prog/03_exercises/00_dataframes.html">
     Working with a
     <code class="docutils literal notranslate">
      <span class="pre">
       pandas.Dataframe
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../02_stat_prog/03_exercises/01_data_wrangling_matplotlib.html">
     ED data wrangling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../02_stat_prog/03_exercises/02_stroke_data_wrangling.html">
     Stroke data wrangling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../02_stat_prog/03_exercises/03_visualise_ts.html">
     Visualising time series data
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../02_stat_prog/04_solutions_front_page.html">
   Solutions
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../02_stat_prog/04_solutions/00_dataframes.html">
     Working with a
     <code class="docutils literal notranslate">
      <span class="pre">
       pandas.Dataframe
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../02_stat_prog/04_solutions/01_data_wrangling_matplotlib_solutions.html">
     ED Data Wrangling Exercises
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../02_stat_prog/04_solutions/02_stroke_data_wrangling_solutions.html">
     Stroke data wrangling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../02_stat_prog/04_solutions/03_visualise_ts_SOLUTIONS.html">
     Visualising time series data
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Managing Data Science Projects
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../03_vc_front_page.html">
   Version control
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="02_git.html">
     Introducing Git
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="03_cs_1.html">
     Case study: Basic use of Git
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Case study: roll back and bug fix
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="05_cs_3.html">
     Case study: Branching and merging
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../03_mgt_front_page.html">
   Deployment
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
  <label for="toctree-checkbox-12">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../02_packaging/01_python_packages.html">
     Local python packages
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03_pypi/01_pypi.html">
     PyPi
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04_binder/01_binder.html">
     BinderHub
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../04_exercises_front_page.html">
   Exercises
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
  <label for="toctree-checkbox-13">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../04_exercises/01_python_packages.html">
     Python package exercise
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04_exercises/02_conda.html">
     Using
     <code class="docutils literal notranslate">
      <span class="pre">
       conda
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../04_exercises/03_binder.html">
     Binderhub exercises
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../05_solutions_front_page.html">
   Solutions
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
  <label for="toctree-checkbox-14">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../05_solutions/01_python_packages_solutions.html">
     Python package exercise
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Appendix
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../appendix/acknowledge.html">
   Acknowledgements
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Appendix Basic Python
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../appendix/fp_lectures.html">
   Lectures
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
  <label for="toctree-checkbox-15">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../appendix/lectures/Lecture1.html">
     Python Basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../appendix/lectures/Lecture2.html">
     Conditionals and Loops
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../appendix/fp_practicals.html">
   Practicals
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/>
  <label for="toctree-checkbox-16">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../appendix/labs/01_basics.html">
     Basic Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../appendix/labs/debug1.html">
     Debug challenge 1
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../appendix/labs/02_basics.html">
     Conditionals and Loops
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../appendix/labs/debug2.html">
     Debug challenge 2
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../../_sources/content/03_mgt/01_git/04_cs_2.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/health-data-science-OR/coding-for-ml"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/health-data-science-OR/coding-for-ml/issues/new?title=Issue%20on%20page%20%2Fcontent/03_mgt/01_git/04_cs_2.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#scenario">
   Scenario
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#step-1-modify-and-commit-changes-tomain-py">
   Step 1: Modify and commit changes to
   <code class="docutils literal notranslate">
    <span class="pre">
     main.py
    </span>
   </code>
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#step-2-finding-the-bug">
   Step 2: Finding the bug
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#step-3-reviewing-changes">
   Step 3: Reviewing changes
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#step-3-rolling-back">
   Step 3: Rolling back
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#git-revert">
     <code class="docutils literal notranslate">
      <span class="pre">
       git
      </span>
      <span class="pre">
       revert
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="case-study-roll-back-and-bug-fix">
<h1>Case study: roll back and bug fix<a class="headerlink" href="#case-study-roll-back-and-bug-fix" title="Permalink to this headline">¶</a></h1>
<p>This case study assumes you have worked through case study 1 and have a the following project that is a git repo.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>analysis_code
├── main.py
├── readme.md
├── run_1.log
└── run_2.log
</pre></div>
</div>
<p>Issuing the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span> <span class="pre">--oneline</span></code> command you should get the following history.</p>
<blockquote>
<div><p>Remember that your commit hash values will be unique to your repo.</p>
</div></blockquote>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>6475df6 DOCS: run instructions
186d91b SETUP: .gitignore + *.log
d404939 INIT: add main.py
</pre></div>
</div>
<div class="section" id="scenario">
<h2>Scenario<a class="headerlink" href="#scenario" title="Permalink to this headline">¶</a></h2>
<p>You have written an analysis program.  This code executes each night on critical patient level data.  At a recent meeting a senior researcher requested a new subgroup analysis in the code.  You know how to do this and quickly make the change to the data.  Unfortunately your change introduces an unexpected bug into the main analysis.  Given the importance of the code, it is necessary to roll back to the previous version that works with no problems while a fix is found.</p>
<p>To simulate this, you are going to commit a change to an existing code base that results in a bug.  We will explore using git to undo the change by rolling back to a previous commit and then fixing the bug.</p>
</div>
<div class="section" id="step-1-modify-and-commit-changes-tomain-py">
<h2>Step 1: Modify and commit changes to<code class="docutils literal notranslate"><span class="pre">main.py</span></code><a class="headerlink" href="#step-1-modify-and-commit-changes-tomain-py" title="Permalink to this headline">¶</a></h2>
<p>Let’s make a change to the <code class="docutils literal notranslate"><span class="pre">main.py</span></code> and commit it to the repo.  The twist is that our new modifications are going to contain a hidden and sneaky bug!</p>
<div class="admonition-this-would-never-happen-in-real-life admonition">
<p class="admonition-title">This would never happen in real life</p>
<p>You may be reading this and thinking - I will never commit a bug to the main branch of my git repo because all of my code is tested and triple checked beforehand.  If so good for you.  It never happens to me either… ahem.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">main module</span>

<span class="sd">&#39;&#39;&#39;</span>

<span class="k">def</span> <span class="nf">do_something</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Friendly code&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">do_something_else</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;This is a major bug!&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">do_something</span><span class="p">()</span>
    <span class="n">do_something_else</span><span class="p">()</span>

</pre></div>
</div>
<p>The git command to commit is</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git status
git add main.py
git status
git commit -m <span class="s2">&quot;MAIN:+do_something_else() extends analysis&quot;</span>
git log -2 --oneline
</pre></div>
</div>
<blockquote>
<div><p>Note that I checked the status of my repo before and after staging a file.</p>
</div></blockquote>
<p>The final git command requests a one line summary of the last two commits:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>e1c4fd3 MAIN:+do_something_else<span class="o">()</span> extends analysis
6475df6 DOCS: run instructions
</pre></div>
</div>
</div>
<div class="section" id="step-2-finding-the-bug">
<h2>Step 2: Finding the bug<a class="headerlink" href="#step-2-finding-the-bug" title="Permalink to this headline">¶</a></h2>
<p>When you run the analysis code:</p>
<blockquote>
<div><p>This assumes you are in the <code class="docutils literal notranslate"><span class="pre">analysis_code</span></code> directory that contains <code class="docutils literal notranslate"><span class="pre">main.py</span></code></p>
</div></blockquote>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3 main.py
</pre></div>
</div>
<p>You are shocked to receive the following output:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>Friendly code
This is a major bug!
</pre></div>
</div>
<p>This is a major problem for your project.  This code runs every night and needs to be rolled back to a previous working version.  Luckily this is simple because it is only 1 commit previous.</p>
</div>
<div class="section" id="step-3-reviewing-changes">
<h2>Step 3: Reviewing changes<a class="headerlink" href="#step-3-reviewing-changes" title="Permalink to this headline">¶</a></h2>
<p>Before we undo the last commit to the repo let’s have quick look at what changes were actually made to <code class="docutils literal notranslate"><span class="pre">main.py</span></code>.  We can do that by using commit id or by using <code class="docutils literal notranslate"><span class="pre">HEAD~1</span></code> where <code class="docutils literal notranslate"><span class="pre">~1</span></code> refers to 1 commit previous.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git diff HEAD~1 main.py
</pre></div>
</div>
<p>In English, this asks git for the difference in <a class="reference external" href="http://main.py">main.py</a> one commit previous.  This results in:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>diff --git a/main.py b/main.py
index 38056d8..d1c50df <span class="m">100644</span>
--- a/main.py
+++ b/main.py
@@ -4,7 +4,11 @@ main module

 
 def do_something<span class="o">()</span>:
-    pass
+    print<span class="o">(</span><span class="s1">&#39;Friendly code&#39;</span><span class="o">)</span>
 
-if <span class="nv">__name__</span> <span class="o">=</span> <span class="s1">&#39;__main__&#39;</span>:
+def do_something_else<span class="o">()</span>:
+    print<span class="o">(</span><span class="s1">&#39;This is a major bug!&#39;</span><span class="o">)</span>
+
+if <span class="nv">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span>:
     do_something<span class="o">()</span>
+    do_something_else<span class="o">()</span>
</pre></div>
</div>
</div>
<div class="section" id="step-3-rolling-back">
<h2>Step 3: Rolling back<a class="headerlink" href="#step-3-rolling-back" title="Permalink to this headline">¶</a></h2>
<p>In my view “undo” operations in git can be some of the most confusing because there is more than one way to do it.</p>
<div class="section" id="git-revert">
<h3><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">revert</span></code><a class="headerlink" href="#git-revert" title="Permalink to this headline">¶</a></h3>
<p>Here we will take a safe option and <strong>git revert</strong> a commit.  This command creates a <strong>new commit</strong> and reverses changes made in a previous commit.  It is safe because <strong>you don’t lose any history</strong>.  The old buggy commit remains and you can access the code within it.</p>
<p>The commit we want to revert is the last one.  To be clear its is the commit that contains the code that introduced the bug.  We first look up its commit hash:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git log -2 --oneline
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>e1c4fd3 <span class="o">(</span>HEAD -&gt; master<span class="o">)</span> MAIN:+do_something_else<span class="o">()</span> extends analysis
6475df6 DOCS: run instructions
</pre></div>
</div>
<p>and then issue the revert command referencing e1c4fd3</p>
<blockquote>
<div><p>a reminder again that this is the commit that introduced the bug!</p>
</div></blockquote>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git revert e1c4fd3
</pre></div>
</div>
<p>When you do this you will be prompted to add a commit message.  One is provided for you by git.  I’m just going to accept it as is.</p>
<div class="highlight-nano notranslate"><div class="highlight"><pre><span></span>Revert &quot;MAIN:+do_something_else() extends analysis&quot;

This reverts commit e1c4fd3ce836f6fe1f7df3a6d1fb805209a790d8.
</pre></div>
</div>
<p>After reverting git we can check <code class="docutils literal notranslate"><span class="pre">main.py</span></code> and find that it has returned to a bug free state!</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">main module</span>

<span class="sd">&#39;&#39;&#39;</span>

<span class="k">def</span> <span class="nf">do_something</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">=</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">do_something</span><span class="p">()</span>
</pre></div>
</div>
<p>We can also confirm that our history is intact and <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">revert</span></code> has created a new commit by <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span> <span class="pre">-3</span> <span class="pre">--online</span></code></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>73fcaa5 <span class="o">(</span>HEAD -&gt; master<span class="o">)</span> Revert <span class="s2">&quot;MAIN:+do_something_else() extends analysis&quot;</span>
e1c4fd3 MAIN:+do_something_else<span class="o">()</span> extends analysis
6475df6 DOCS: run instructions
</pre></div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "health-data-science-OR/coding-for-ml",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./content/03_mgt/01_git"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            



<div class='prev-next-bottom'>
    
    <div id="prev">
        <a class="left-prev" href="03_cs_1.html" title="previous page">
            <i class="prevnext-label fas fa-angle-left"></i>
            <div class="prevnext-info">
                <p class="prevnext-label">previous</p>
                <p class="prevnext-title">Case study: Basic use of Git</p>
            </div>
        </a>
    </div>
     <div id="next">
        <a class="right-next" href="05_cs_3.html" title="next page">
            <div class="prevnext-info">
                <p class="prevnext-label">next</p>
                <p class="prevnext-title">Case study: Branching and merging</p>
            </div>
            <i class="prevnext-label fas fa-angle-right"></i>
        </a>
     </div>

</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Thomas Monks<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>